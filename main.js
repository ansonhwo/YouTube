var videos = [
{
  title: "A Message from President-Elect Donald J. Trump",
  channel: "Transition 2017",
  description: "The President-elect shares an update on the Presidential Transition," +
    " an outline of some of his policy plans for the first 100 days, and his day one executive actions.",
  views: "1,341,158",
  comments: [],
  thumbnail: "https://i.ytimg.com/vi/7xX_KaStFT8/hqdefault.jpg?custom=true&w=196&h=110&stc=true&jpg444=true&jpgq=90&sp=68&sigh=sSuKCtqF5viHrZPjm2RfTsPvqNs",
  embed: '<iframe width="560" height="315" src="https://www.youtube.com/embed/7xX_KaStFT8" frameborder="0" allowfullscreen></iframe>'
},
{
  title: "Cars 3 Official US Teaser Trailer",
  channel: "Disney-Pixar",
  description: "From this moment, everything will change.\n\nDisney/Pixar's Cars 3 opens in US theatres" +
    " in 3D June 16, 2017.\n\nBlindsided by a new generation of blazing-fast races, the legendary Lightning McQueen (voice of Owen" +
    " Wilson) is suddenly pushed out of the sport he loves. To get back in the game, he will need the help of" +
    " an eager young race technician, Cruz Ramirez, with her own plan to win, plus inspiration from the late Fabulous" +
    " Hudson Hornet and a few unexpected turns.",
  views: "3,258,307",
  comments: [],
  thumbnail: "https://i.ytimg.com/vi/E4K7JgPJ8-s/hqdefault.jpg?custom=true&w=196&h=110&stc=true&jpg444=true&jpgq=90&sp=68&sigh=DEWWRQJ38bHkSaBCT19c7Xeimnw",
  embed: '<iframe width="560" height="315" src="https://www.youtube.com/embed/E4K7JgPJ8-s" frameborder="0" allowfullscreen></iframe>'
},
{
  title: "Flip Edition | Dude Perfect",
  channel: "Dude Perfect",
  description: "It's time to flip some stuff!\nThanks to Fantasitc Gymnastics by Hasbro Gaming for sponsoring" +
    " this video! Go to http://bit.ly/FantasticGymnasticsDP to get Fantastic Gymnastics for yourself!",
  views: "4,460,870",
  comments: [],
  thumbnail: "https://i.ytimg.com/vi/8YydogFXCPM/hqdefault.jpg?custom=true&w=196&h=110&stc=true&jpg444=true&jpgq=90&sp=68&sigh=MzABtab1-7LFj6m97B5xOS-lCgk",
  embed: '<iframe width="560" height="315" src="https://www.youtube.com/embed/8YydogFXCPM" frameborder="0" allowfullscreen></iframe>'
},
{
  title: "Billy on the Street: DEATH ROGEN! With Seth Rogen",
  channel: "billyonthestreettv",
  description: "New from Billy on the Street! Watch Billy hit the street with SETH ROGEN in disguise, tell" +
    " people that Seth has died and get their reactions! We call this DEATH ROGEN. Watch full episodes of Billy on the Street Tuesdays at 10:30/9:30c on @TruTV!",
  views: "364,533",
  comments: [],
  thumbnail: "https://i.ytimg.com/vi/A2R2iBc8udc/hqdefault.jpg?custom=true&w=168&h=94&stc=true&jpg444=true&jpgq=90&sp=68&sigh=j7ivnsDvrCl-ucJWKLoscivhtrs",
  embed: '<iframe width="560" height="315" src="https://www.youtube.com/embed/diN92St7FA8" frameborder="0" allowfullscreen></iframe>'
},
{
  title: "Bullets vs Propeller in Slow Motion - The Slow Mo Guys",
  channel: "The Slow Mo Guys",
  description: "Gary and Dan venture out to the desert to film some bullets. Make sure you watch in HD for maximum bullet" +
    " shockwave action!\nCheers to EA for sponsoring this video. Check out the game at http://www.battlefield.com\n" +
    "Follow Gav on Twitter - https://twitter.com/GavinFree\nFollow Dan on Twitter - https://twitter.com/DanielGruchy",
  views: "1,466,332",
  comments: [],
  thumbnail: "https://i.ytimg.com/vi/ysB-SH19WRQ/hqdefault.jpg?custom=true&w=196&h=110&stc=true&jpg444=true&jpgq=90&sp=68&sigh=9OEQLS6JSWBMQ8sCrd0yZt58lJ8",
  embed: '<iframe width="560" height="315" src="https://www.youtube.com/embed/ysB-SH19WRQ" frameborder="0" allowfullscreen></iframe>'
},
{
  title: 'The Voice 2016 Billy Gilman - Top 11: "All I Ask"',
  channel: "The Voice",
  description: "Billy Gilman showcases his vocal talent with a powerful rendition of 'All I Ask' by Adele.\n\n" +
    "NBC's The Voice follows the strongest vocalists from across the country and invites them to compete in" +
    " this season's blockbuster vocal competition.",
  views: "213,615",
  comments: [],
  thumbnail: "https://i.ytimg.com/vi/RswuJVHVw_0/hqdefault.jpg?custom=true&w=196&h=110&stc=true&jpg444=true&jpgq=90&sp=68&sigh=6lmdPt82bEpmKOw202Zi67Iwk7U",
  embed: '<iframe width="560" height="315" src="https://www.youtube.com/embed/RswuJVHVw_0" frameborder="0" allowfullscreen></iframe>'
},
{
  title: "The iPhone 8 Will Be Incredible!",
  channel: "EverythingApplePro",
  description: "iPhone 8 & 8 Plus Rumors & Leaks Have Begun! New Features To Expect & Rumor Roundup With Sources!",
  views: "693,167",
  comments: [],
  thumbnail: "https://i.ytimg.com/vi/MZqyfeUi7As/hqdefault.jpg?custom=true&w=196&h=110&stc=true&jpg444=true&jpgq=90&sp=68&sigh=HDgDRvuiwhCcMHXVT0Gm9eukqU8",
  embed: '<iframe width="560" height="315" src="https://www.youtube.com/embed/MZqyfeUi7As" frameborder="0" allowfullscreen></iframe>'
},
{
  title: "10 Disney Crossover Easter Eggs That You've Never Seen",
  channel: "Screen Rant",
  description: "Animated movies are a right of passage for most children, and nobody does them better than Disney. Every child remembers watching Snow White and" +
    " The Little Mermaid for the first time, and most of us are still heading to theatres whenever a new Pixar film comes out. But we don't always catch the Easter" +
    " eggs left there by mischievious animators, or the cameos that some Disney characters make in movies that aren't their own.",
  views: "260,853",
  comments: [],
  thumbnail: "https://i.ytimg.com/vi/KBTwUOsO4d0/hqdefault.jpg?custom=true&w=196&h=110&stc=true&jpg444=true&jpgq=90&sp=68&sigh=Ue_RmuQ0uggRmpbxvxQAiC-w060",
  embed: '<iframe width="560" height="315" src="https://www.youtube.com/embed/KBTwUOsO4d0" frameborder="0" allowfullscreen></iframe>'
}];
var $searchBar = document.getElementById('searchbar');


// Deletes all of the children associated with the provided element ID.
function deleteChild(_element) {
  while (_element.hasChildNodes()) {
    _element.removeChild(_element.lastChild);
  }
}


// Helper function to create elements with a specified id/class
function newElement(_type, _attribute1, _attribute2) {
  if (!_type) return;
  var $element = document.createElement(_type);

  if (!_attribute1 || !_attribute2) return $element;
  $element.setAttribute(_attribute1, _attribute2);

  return $element;
}


// Return a array of matched video objects based on user query.
function findMatch(_query) {
  var videoList = [];

  for (var index = 0; index < videos.length; index++) {
    var itemText = videos[index].description + videos[index].title + videos[index].channel;
    if (itemText.toLowerCase().includes(_query.toLowerCase())) {
      videoList.push(videos[index]);
    }
  }

  return videoList;
}


// Builds video list with videos that match the user's search query
function buildVideoList(_elements) {
  var $videoList = document.getElementById('videos');
  var $videoBlock = newElement('div', 'id', 'videoblock');

  $videoList.appendChild($videoBlock);

  for (var index = 0; index < _elements.length; index++) {
    var $videoDetails = newElement('div', 'id', 'videodetails');
    var $videoImage = newElement('img', 'id', 'videoimg');
    var $videoTitle = newElement('h4', 'id', 'videotitle');
    var $videoChannel = newElement('p', 'id', 'videochannel');
    var $videoViews = newElement('p', 'id', 'videoviews');
    var $videoDesc = newElement('p', 'id', 'videodesc');
    var $link = newElement('a', 'href', '#');

    $videoBlock.appendChild($videoDetails);

    $videoImage.setAttribute('src', _elements[index].thumbnail);
    $videoDetails.appendChild($link);
    $link.appendChild($videoImage);

    $videoTitle.textContent = _elements[index].title;
    $videoDetails.appendChild($link);
    $link.appendChild($videoTitle);

    $videoChannel.textContent = _elements[index].channel;
    $videoDetails.appendChild($videoChannel);

    $videoViews.textContent = _elements[index].views + " views";
    $videoDetails.appendChild($videoViews);

    $videoDesc.textContent = _elements[index].description;
    $videoDetails.appendChild($videoDesc);
  }
}


document.addEventListener('submit', function(_event) {

  _event.preventDefault();

  var query = $searchBar.value;

  if (query.trim()) {
    query = query.trim();
    var videoList = findMatch(query);
    var $videoBlock = newElement('div', 'class', 'videoblock');
    var $videos = document.getElementById('videos');

    $videos.appendChild($videoBlock);

    deleteChild($videos);

    if (videoList.length > 0) {
      buildVideoList(videoList);
    }
    else {
      var $invalidSearch = newElement('h2', 'id', 'invalidsearch');
      $invalidSearch.textContent = 'No results found for: ' + query + '.';
      $videos.appendChild($invalidSearch);
    }
  }
  else return;

});
